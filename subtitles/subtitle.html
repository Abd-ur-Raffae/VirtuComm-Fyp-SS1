<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Player with Subtitles</title>
    <style>
        .subtitle {
            font-size: 20px;
            margin-top: 20px;
            color: #333;
        }
    </style>
</head>
<body>

<div class="audio-player">
    <audio id="audioPlayer" controls>
        <source src="Greetings.mp3" type="audio/wav"> <!-- Replace with your audio file path -->
        Your browser does not support the audio element.
    </audio>
</div>

<div id="subtitles" class="subtitle"></div>

<script>
// Fetch the JSON file containing subtitles
fetch('subtitles1.json') // Replace with the actual path to your JSON file
    .then(response => response.json())
    .then(data => {
        const audioPlayer = document.getElementById('audioPlayer');
        const subtitlesDiv = document.getElementById('subtitles');

        // Function to update subtitles
        function updateSubtitles() {
            const currentTime = audioPlayer.currentTime * 1000; // Convert to milliseconds

            // Clear the subtitles div
            subtitlesDiv.innerHTML = '';

            // Check the current time against subtitle timings
            data.forEach(subtitle => {
                const start = parseTimeToMilliseconds(subtitle.start);
                const end = parseTimeToMilliseconds(subtitle.end);

                if (currentTime >= start && currentTime <= end) {
                    subtitlesDiv.innerHTML = subtitle.text; // Display the text of the matching subtitle
                }
            });
        }

        // Function to convert time format to milliseconds
        function parseTimeToMilliseconds(time) {
            const parts = time.split(',');
            const timeParts = parts[0].split(':');
            const milliseconds = parseInt(parts[1]);
            return (parseInt(timeParts[0]) * 3600 + parseInt(timeParts[1]) * 60 + parseInt(timeParts[2])) * 1000 + milliseconds;
        }

        // Update subtitles while the audio is playing
        audioPlayer.addEventListener('timeupdate', updateSubtitles);
    })
    .catch(error => console.error('Error fetching subtitles:', error));
</script>

</body>
</html>
